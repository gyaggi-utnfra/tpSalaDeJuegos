import{a as qt}from"./chunk-7AQS2LSG.js";import{$ as je,Ba as jt,D as vi,Fa as bi,Kb as ze,Ma as g,Qb as zt,Rb as Ai,Sa as Bt,Tb as Ci,Va as ye,Wa as $,Y as yi,Yb as Ti,Z as He,a as v,aa as ge,ac as Si,b as I,ba as Be,bc as Ie,cc as L,d as j,da as E,e as a,fa as Ii,fb as $t,ga as Ht,h as me,ha as B,k as pi,ka as $e,la as P,m as mi,n as gi,na as Ge,p as Ft,q as Ut,r as xt,ra as Ei,rb as Gt,s as Wt,ua as wi,wa as _e,x as _i,ya as ve,za as te}from"./chunk-PVR3HKZP.js";var Pi=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Ss=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Oi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,u=r+2<n.length,l=u?n[r+2]:0,h=s>>2,f=(s&3)<<4|c>>4,m=(c&15)<<2|l>>6,D=l&63;u||(D=64,o||(m=64)),i.push(t[h],t[f],t[m],t[D])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Pi(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ss(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let f=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||l==null||f==null)throw new Jt;let m=s<<2|c>>4;if(i.push(m),l!==64){let D=c<<4&240|l>>2;if(i.push(D),f!==64){let ee=l<<6&192|f;i.push(ee)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Jt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ds=function(n){let e=Pi(n);return Oi.encodeByteArray(e,!0)},Ee=function(n){return Ds(n).replace(/\./g,"")},Xt=function(n){try{return Oi.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ps(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Os=()=>Ps().__FIREBASE_DEFAULTS__,Rs=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ks=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Xt(n[1]);return e&&JSON.parse(e)},Ke=()=>{try{return Os()||Rs()||ks()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Zt=n=>{var e,t;return(t=(e=Ke())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},rl=n=>{let e=Zt(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Qt=()=>{var n;return(n=Ke())===null||n===void 0?void 0:n.config},en=n=>{var e;return(e=Ke())===null||e===void 0?void 0:e[`_${n}`]};var qe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function sl(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ee(JSON.stringify(t)),Ee(JSON.stringify(o)),""].join(".")}function _(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ri(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function Ns(){var n;let e=(n=Ke())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ki(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ni(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mi(){let n=_();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ol(){return!Ns()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vi(){try{return typeof indexedDB=="object"}catch{return!1}}function Li(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Ms="FirebaseError",w=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Ms,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}},O=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Vs(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new w(r,c,i)}};function Vs(n,e){return n.replace(Ls,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Ls=/\{\$([^}]+)}/g;function Fi(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ne(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(Di(s)&&Di(o)){if(!ne(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Di(n){return n!==null&&typeof n=="object"}function we(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ie(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function re(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ui(n,e){let t=new Yt(n,e);return t.subscribe.bind(t)}var Yt=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Fs(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Kt),r.error===void 0&&(r.error=Kt),r.complete===void 0&&(r.complete=Kt);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Fs(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kt(){}var al=4*60*60*1e3;function R(n){return n&&n._delegate?n._delegate:n}var A=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var G="[DEFAULT]";var tn=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new qe;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xs(e))try{this.getOrInitializeService({instanceIdentifier:G})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=G){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return a(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=G){return this.instances.has(e)}getOptions(e=G){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Us(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=G){return this.component?this.component.multipleInstances?e:G:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Us(n){return n===G?void 0:n}function xs(n){return n.instantiationMode==="EAGER"}var Je=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new tn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Ws=[],p=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(p||{}),Hs={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},js=p.INFO,Bs={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},$s=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Bs[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},se=class{constructor(e){this.name=e,this._logLevel=js,this._logHandler=$s,this._userLogHandler=null,Ws.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in p))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hs[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...e),this._logHandler(this,p.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...e),this._logHandler(this,p.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,p.INFO,...e),this._logHandler(this,p.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,p.WARN,...e),this._logHandler(this,p.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...e),this._logHandler(this,p.ERROR,...e)}};var Gs=(n,e)=>e.some(t=>n instanceof t),xi,Wi;function zs(){return xi||(xi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qs(){return Wi||(Wi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Hi=new WeakMap,rn=new WeakMap,ji=new WeakMap,nn=new WeakMap,on=new WeakMap;function Ks(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(C(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Hi.set(t,n)}).catch(()=>{}),on.set(e,n),e}function Js(n){if(rn.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});rn.set(n,e)}var sn={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rn.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ji.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return C(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bi(n){sn=n(sn)}function Ys(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Ye(this),e,...t);return ji.set(i,e.sort?e.sort():[e]),C(i)}:qs().includes(n)?function(...e){return n.apply(Ye(this),e),C(Hi.get(this))}:function(...e){return C(n.apply(Ye(this),e))}}function Xs(n){return typeof n=="function"?Ys(n):(n instanceof IDBTransaction&&Js(n),Gs(n,zs())?new Proxy(n,sn):n)}function C(n){if(n instanceof IDBRequest)return Ks(n);if(nn.has(n))return nn.get(n);let e=Xs(n);return e!==n&&(nn.set(n,e),on.set(e,n)),e}var Ye=n=>on.get(n);function Gi(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=C(o);return i&&o.addEventListener("upgradeneeded",u=>{i(C(o.result),u.oldVersion,u.newVersion,C(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var Zs=["get","getKey","getAll","getAllKeys","count"],Qs=["put","add","delete","clear"],an=new Map;function $i(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(an.get(e))return an.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=Qs.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Zs.includes(t)))return;let s=function(o,...c){return a(this,null,function*(){let u=this.transaction(o,r?"readwrite":"readonly"),l=u.store;return i&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),r&&u.done]))[0]})};return an.set(e,s),s}Bi(n=>I(v({},n),{get:(e,t,i)=>$i(e,t)||n.get(e,t,i),has:(e,t)=>!!$i(e,t)||n.has(e,t)}));var un=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eo(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function eo(n){let e=n.getComponent();return e?.type==="VERSION"}var ln="@firebase/app",zi="0.10.10";var k=new se("@firebase/app"),to="@firebase/app-compat",no="@firebase/analytics-compat",io="@firebase/analytics",ro="@firebase/app-check-compat",so="@firebase/app-check",oo="@firebase/auth",ao="@firebase/auth-compat",co="@firebase/database",uo="@firebase/database-compat",lo="@firebase/functions",ho="@firebase/functions-compat",fo="@firebase/installations",po="@firebase/installations-compat",mo="@firebase/messaging",go="@firebase/messaging-compat",_o="@firebase/performance",vo="@firebase/performance-compat",yo="@firebase/remote-config",Io="@firebase/remote-config-compat",Eo="@firebase/storage",wo="@firebase/storage-compat",bo="@firebase/firestore",Ao="@firebase/vertexai-preview",Co="@firebase/firestore-compat",To="firebase",So="10.13.1";var dn="[DEFAULT]",Do={[ln]:"fire-core",[to]:"fire-core-compat",[io]:"fire-analytics",[no]:"fire-analytics-compat",[so]:"fire-app-check",[ro]:"fire-app-check-compat",[oo]:"fire-auth",[ao]:"fire-auth-compat",[co]:"fire-rtdb",[uo]:"fire-rtdb-compat",[lo]:"fire-fn",[ho]:"fire-fn-compat",[fo]:"fire-iid",[po]:"fire-iid-compat",[mo]:"fire-fcm",[go]:"fire-fcm-compat",[_o]:"fire-perf",[vo]:"fire-perf-compat",[yo]:"fire-rc",[Io]:"fire-rc-compat",[Eo]:"fire-gcs",[wo]:"fire-gcs-compat",[bo]:"fire-fst",[Co]:"fire-fst-compat",[Ao]:"fire-vertex","fire-js":"fire-js",[To]:"fire-js-all"};var be=new Map,Po=new Map,hn=new Map;function qi(n,e){try{n.container.addComponent(e)}catch(t){k.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function oe(n){let e=n.name;if(hn.has(e))return k.debug(`There were multiple attempts to register component ${e}.`),!1;hn.set(e,n);for(let t of be.values())qi(t,n);for(let t of Po.values())qi(t,n);return!0}function gn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function b(n){return n.settings!==void 0}var Oo={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},F=new O("app","Firebase",Oo);var fn=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new A("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw F.create("app-deleted",{appName:this._name})}};var ae=So;function _n(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:dn,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw F.create("bad-app-name",{appName:String(r)});if(t||(t=Qt()),!t)throw F.create("no-options");let s=be.get(r);if(s){if(ne(t,s.options)&&ne(i,s.config))return s;throw F.create("duplicate-app",{appName:r})}let o=new Je(r);for(let u of hn.values())o.addComponent(u);let c=new fn(t,i,o);return be.set(r,c),c}function Xe(n=dn){let e=be.get(n);if(!e&&n===dn&&Qt())return _n();if(!e)throw F.create("no-app",{appName:n});return e}function Ze(){return Array.from(be.values())}function y(n,e,t){var i;let r=(i=Do[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),k.warn(c.join(" "));return}oe(new A(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Ro="firebase-heartbeat-database",ko=1,Ae="firebase-heartbeat-store",cn=null;function Xi(){return cn||(cn=Gi(Ro,ko,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ae)}catch(t){console.warn(t)}}}}).catch(n=>{throw F.create("idb-open",{originalErrorMessage:n.message})})),cn}function No(n){return a(this,null,function*(){try{let t=(yield Xi()).transaction(Ae),i=yield t.objectStore(Ae).get(Zi(n));return yield t.done,i}catch(e){if(e instanceof w)k.warn(e.message);else{let t=F.create("idb-get",{originalErrorMessage:e?.message});k.warn(t.message)}}})}function Ki(n,e){return a(this,null,function*(){try{let i=(yield Xi()).transaction(Ae,"readwrite");yield i.objectStore(Ae).put(e,Zi(n)),yield i.done}catch(t){if(t instanceof w)k.warn(t.message);else{let i=F.create("idb-set",{originalErrorMessage:t?.message});k.warn(i.message)}}})}function Zi(n){return`${n.name}!${n.options.appId}`}var Mo=1024,Vo=30*24*60*60*1e3,pn=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new mn(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return a(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ji();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=Vo}),this._storage.overwrite(this._heartbeatsCache))}catch(i){k.warn(i)}})}getHeartbeatsHeader(){return a(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ji(),{heartbeatsToSend:i,unsentEntries:r}=Lo(this._heartbeatsCache.heartbeats),s=Ee(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return k.warn(t),""}})}};function Ji(){return new Date().toISOString().substring(0,10)}function Lo(n,e=Mo){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Yi(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Yi(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var mn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return a(this,null,function*(){return Vi()?Li().then(()=>!0).catch(()=>!1):!1})}read(){return a(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield No(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return a(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ki(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return a(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ki(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Yi(n){return Ee(JSON.stringify({version:2,heartbeats:n})).length}function Fo(n){oe(new A("platform-logger",e=>new un(e),"PRIVATE")),oe(new A("heartbeat",e=>new pn(e),"PRIVATE")),y(ln,zi,n),y(ln,zi,"esm2017"),y("fire-js","")}Fo("");var Uo="firebase",xo="10.13.1";y(Uo,xo,"app");var Ce=new zt("ANGULARFIRE2_VERSION");function er(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var yn=(n,e)=>{let t=e?[e]:Ze(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Qe=class{constructor(){return yn(Wo)}},Wo="app-check";function ce(){}var et=class{zone;delegate;constructor(e,t=gi){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},vn=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ce,{},ce,ce)),t.pipe(yi({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},tt=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new et(Zone.current)),this.insideAngular=t.run(()=>new et(Zone.current,mi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(Ii(te))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nt(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ho(n){return nt().ngZone.runOutsideAngular(()=>n())}function z(n){return nt().ngZone.run(()=>n())}function jo(n){return Bo(nt())(n)}function Bo(n){return function(t){return t=t.lift(new vn(n.ngZone)),t.pipe(xt(n.outsideAngular),Ut(n.insideAngular))}}var $o=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),z(()=>n.apply(void 0,i))},q=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=z(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ce,{},ce,ce))),i[s]=$o(i[s],t));let r=Ho(()=>n.apply(this,i));if(!e)if(r instanceof me){let s=nt();return r.pipe(xt(s.outsideAngular),Ut(s.insideAngular))}else return z(()=>r);return r instanceof me?r.pipe(jo):r instanceof Promise?z(()=>new Promise((s,o)=>r.then(c=>z(()=>s(c)),c=>z(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:z(()=>r)};var K=class{constructor(e){return e}},Te=class{constructor(){return Ze()}};function Go(n){return n&&n.length===1?n[0]:new K(Xe())}var In=new E("angularfire2._apps"),zo={provide:K,useFactory:Go,deps:[[new B,In]]},qo={provide:Te,deps:[[new B,In]]};function Ko(n){return(e,t)=>{let i=t.get(bi);y("angularfire",Ce.full,"core"),y("angularfire",Ce.full,"app"),y("angular",Ai.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new K(r)}}function ql(n,...e){return Ge([zo,qo,{provide:In,useFactory:Ko(n),multi:!0,deps:[te,_e,tt,...e]}])}var Kl=q(_n,!0);function _r(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vr=_r,yr=new O("auth","Firebase",_r());var ct=new se("@firebase/auth");function Jo(n,...e){ct.logLevel<=p.WARN&&ct.warn(`Auth (${ae}): ${n}`,...e)}function rt(n,...e){ct.logLevel<=p.ERROR&&ct.error(`Auth (${ae}): ${n}`,...e)}function S(n,...e){throw Bn(n,...e)}function J(n,...e){return Bn(n,...e)}function Ir(n,e,t){let i=Object.assign(Object.assign({},vr()),{[e]:t});return new O("auth","Firebase",i).create(e,{appName:n.name})}function V(n){return Ir(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bn(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return yr.create(n,...e)}function d(n,e,...t){if(!n)throw Bn(e,...t)}function N(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rt(e),new Error(e)}function x(n,e){n||N(e)}function An(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Yo(){return tr()==="http:"||tr()==="https:"}function tr(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Xo(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yo()||ki()||"connection"in navigator)?navigator.onLine:!0}function Zo(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Y=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,x(t>e,"Short delay should be less than long delay!"),this.isMobile=Ri()||Ni()}get(){return Xo()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $n(n,e){x(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ut=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Qo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ea=new Y(3e4,6e4);function W(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function H(s,o,c,u){return a(this,arguments,function*(n,e,t,i,r={}){return Er(n,r,()=>a(this,null,function*(){let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});let f=we(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();return m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode),ut.fetch()(wr(n,n.config.apiHost,t,f),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function Er(n,e,t){return a(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Qo),e);try{let r=new Cn(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw it(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw it(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw it(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw it(n,"user-disabled",o);let h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Ir(n,h,l);S(n,h)}}catch(r){if(r instanceof w)throw r;S(n,"network-request-failed",{message:String(r)})}})}function Me(s,o,c,u){return a(this,arguments,function*(n,e,t,i,r={}){let l=yield H(n,e,t,i,r);return"mfaPendingCredential"in l&&S(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function wr(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?$n(n.config,r):`${n.config.apiScheme}://${r}`}function ta(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Cn=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(J(this.auth,"network-request-failed")),ea.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function it(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=J(n,e,i);return r.customData._tokenResponse=t,r}function nr(n){return n!==void 0&&n.enterprise!==void 0}var Tn=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ta(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function na(n,e){return a(this,null,function*(){return H(n,"GET","/v2/recaptchaConfig",W(n,e))})}function ia(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:delete",e)})}function br(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:lookup",e)})}function Se(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Gn(n,e=!1){return a(this,null,function*(){let t=R(n),i=yield t.getIdToken(e),r=zn(i);d(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Se(En(r.auth_time)),issuedAtTime:Se(En(r.iat)),expirationTime:Se(En(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function En(n){return Number(n)*1e3}function zn(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return rt("JWT malformed, contained fewer than 3 sections"),null;try{let r=Xt(t);return r?JSON.parse(r):(rt("Failed to decode base64 JWT payload"),null)}catch(r){return rt("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ir(n){let e=zn(n);return d(e,"internal-error"),d(typeof e.exp<"u","internal-error"),d(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Pe(n,e,t=!1){return a(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof w&&ra(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function ra({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Sn=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>a(this,null,function*(){yield this.iteration()}),t)}iteration(){return a(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Oe=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Se(this.lastLoginAt),this.creationTime=Se(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lt(n){return a(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Pe(n,br(t,{idToken:i}));d(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ar(s.providerUserInfo):[],c=sa(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!c?.length,h=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Oe(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)})}function qn(n){return a(this,null,function*(){let e=R(n);yield lt(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sa(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Ar(n){return n.map(e=>{var{providerId:t}=e,i=Ft(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function oa(n,e){return a(this,null,function*(){let t=yield Er(n,{},()=>a(this,null,function*(){let i=we({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=wr(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ut.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function aa(n,e){return a(this,null,function*(){return H(n,"POST","/v2/accounts:revokeToken",W(n,e))})}var De=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){d(e.idToken,"internal-error"),d(typeof e.idToken<"u","internal-error"),d(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ir(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){d(e.length!==0,"internal-error");let t=ir(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return a(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(d(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return a(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield oa(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(d(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(d(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(d(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return N("not implemented")}};function U(n,e){d(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ue=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Ft(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Oe(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return a(this,null,function*(){let t=yield Pe(this,this.stsTokenManager.getToken(this.auth,e));return d(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Gn(this,e)}reload(){return qn(this)}_assign(e){this!==e&&(d(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){d(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return a(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield lt(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return a(this,null,function*(){if(b(this.auth.app))return Promise.reject(V(this.auth));let e=yield this.getIdToken();return yield Pe(this,ia(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,u,l,h;let f=(i=t.displayName)!==null&&i!==void 0?i:void 0,m=(r=t.email)!==null&&r!==void 0?r:void 0,D=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,ee=(o=t.photoURL)!==null&&o!==void 0?o:void 0,ci=(c=t.tenantId)!==null&&c!==void 0?c:void 0,Nt=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,ui=(l=t.createdAt)!==null&&l!==void 0?l:void 0,li=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Mt,emailVerified:di,isAnonymous:hi,providerData:Vt,stsTokenManager:fi}=t;d(Mt&&fi,e,"internal-error");let Cs=De.fromJSON(this.name,fi);d(typeof Mt=="string",e,"internal-error"),U(f,e.name),U(m,e.name),d(typeof di=="boolean",e,"internal-error"),d(typeof hi=="boolean",e,"internal-error"),U(D,e.name),U(ee,e.name),U(ci,e.name),U(Nt,e.name),U(ui,e.name),U(li,e.name);let Lt=new n({uid:Mt,auth:e,email:m,emailVerified:di,displayName:f,isAnonymous:hi,photoURL:ee,phoneNumber:D,tenantId:ci,stsTokenManager:Cs,createdAt:ui,lastLoginAt:li});return Vt&&Array.isArray(Vt)&&(Lt.providerData=Vt.map(Ts=>Object.assign({},Ts))),Nt&&(Lt._redirectEventId=Nt),Lt}static _fromIdTokenResponse(e,t,i=!1){return a(this,null,function*(){let r=new De;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield lt(s),s})}static _fromGetAccountInfoResponse(e,t,i){return a(this,null,function*(){let r=t.users[0];d(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Ar(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new De;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Oe(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var rr=new Map;function M(n){x(n instanceof Function,"Expected a class definition");let e=rr.get(n);return e?(x(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rr.set(n,e),e)}var ca=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return a(this,null,function*(){return!0})}_set(t,i){return a(this,null,function*(){this.storage[t]=i})}_get(t){return a(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return a(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Dn=ca;function st(n,e,t){return`firebase:${n}:${e}:${t}`}var dt=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=st(this.userKey,r.apiKey,s),this.fullPersistenceKey=st("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return a(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ue._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return a(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return a(this,null,function*(){if(!t.length)return new n(M(Dn),e,i);let r=(yield Promise.all(t.map(l=>a(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||M(Dn),o=st(i,e.config.apiKey,e.name),c=null;for(let l of t)try{let h=yield l._get(o);if(h){let f=ue._fromJSON(e,h);l!==s&&(c=f),s=l;break}}catch{}let u=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,i):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(l=>a(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,i))})}};function sr(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dr(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cr(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Or(e))return"Blackberry";if(Rr(e))return"Webos";if(Tr(e))return"Safari";if((e.includes("chrome/")||Sr(e))&&!e.includes("edge/"))return"Chrome";if(Pr(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Cr(n=_()){return/firefox\//i.test(n)}function Tr(n=_()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sr(n=_()){return/crios\//i.test(n)}function Dr(n=_()){return/iemobile/i.test(n)}function Pr(n=_()){return/android/i.test(n)}function Or(n=_()){return/blackberry/i.test(n)}function Rr(n=_()){return/webos/i.test(n)}function Kn(n=_()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ua(n=_()){var e;return Kn(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function la(){return Mi()&&document.documentMode===10}function kr(n=_()){return Kn(n)||Pr(n)||Rr(n)||Or(n)||/windows phone/i.test(n)||Dr(n)}function Nr(n,e=[]){let t;switch(n){case"Browser":t=sr(_());break;case"Worker":t=`${sr(_())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ae}/${i}`}var Pn=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return a(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function da(t){return a(this,arguments,function*(n,e={}){return H(n,"GET","/v2/passwordPolicy",W(n,e))})}var ha=6,On=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:ha,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Rn=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ht(this),this.idTokenSubscription=new ht(this),this.beforeStateQueue=new Pn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=M(t)),this._initializationPromise=this.queue(()=>a(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield dt.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return a(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return a(this,null,function*(){try{let t=yield br(this,{idToken:e}),i=yield ue._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return a(this,null,function*(){var t;if(b(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return d(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return a(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return a(this,null,function*(){try{yield lt(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Zo()}_delete(){return a(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return a(this,null,function*(){if(b(this.app))return Promise.reject(V(this));let t=e?R(e):null;return t&&d(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return a(this,null,function*(){if(!this._deleted)return e&&d(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>a(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return a(this,null,function*(){return b(this.app)?Promise.reject(V(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return b(this.app)?Promise.reject(V(this)):this.queue(()=>a(this,null,function*(){yield this.assertedPersistence.setPersistence(M(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return a(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return a(this,null,function*(){let e=yield da(this),t=new On(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new O("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return a(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield aa(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return a(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return a(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&M(e)||this._popupRedirectResolver;d(t,this,"argument-error"),this.redirectPersistenceManager=yield dt.create(this,[M(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return a(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>a(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return a(this,null,function*(){if(e===this.currentUser)return this.queue(()=>a(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(d(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return a(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return d(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return a(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return a(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Jo(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Z(n){return R(n)}var ht=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ui(t=>this.observer=t)}get next(){return d(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yt={loadJS(){return a(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fa(n){yt=n}function Mr(n){return yt.loadJS(n)}function pa(){return yt.recaptchaEnterpriseScript}function ma(){return yt.gapiScript}function Vr(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var ga="recaptcha-enterprise",_a="NO_RECAPTCHA",kn=class{constructor(e){this.type=ga,this.auth=Z(e)}verify(e="verify",t=!1){return a(this,null,function*(){function i(s){return a(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>a(this,null,function*(){na(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new Tn(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{c(u)})}))})}function r(s,o,c){let u=window.grecaptcha;nr(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(_a)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&nr(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=pa();u.length!==0&&(u+=c),Mr(u).then(()=>{r(c,s,o)}).catch(l=>{o(l)})}}).catch(c=>{o(c)})})})}};function or(n,e,t,i=!1){return a(this,null,function*(){let r=new kn(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Nn(n,e,t,i){return a(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield or(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>a(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield or(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function Jn(n,e){let t=gn(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(ne(s,e??{}))return r;S(r,"already-initialized")}return t.initialize({options:e})}function va(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(M);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Yn(n,e,t){let i=Z(n);d(i._canInitEmulator,i,"emulator-config-failed"),d(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Lr(e),{host:o,port:c}=ya(e),u=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Ia()}function Lr(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ya(n){let e=Lr(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:ar(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:ar(o)}}}function ar(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Ia(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Re=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return N("not implemented")}_getIdTokenResponse(e){return N("not implemented")}_linkToIdToken(e,t){return N("not implemented")}_getReauthenticationResolver(e){return N("not implemented")}};function Ea(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signUp",e)})}function wa(n,e){return a(this,null,function*(){return Me(n,"POST","/v1/accounts:signInWithPassword",W(n,e))})}function ba(n,e){return a(this,null,function*(){return Me(n,"POST","/v1/accounts:signInWithEmailLink",W(n,e))})}function Aa(n,e){return a(this,null,function*(){return Me(n,"POST","/v1/accounts:signInWithEmailLink",W(n,e))})}var ke=class n extends Re{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return a(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nn(e,t,"signInWithPassword",wa);case"emailLink":return ba(e,{email:this._email,oobCode:this._password});default:S(e,"internal-error")}})}_linkToIdToken(e,t){return a(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nn(e,i,"signUpPassword",Ea);case"emailLink":return Aa(e,{idToken:t,email:this._email,oobCode:this._password});default:S(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function wn(n,e){return a(this,null,function*(){return Me(n,"POST","/v1/accounts:signInWithIdp",W(n,e))})}function Ca(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ta(n){let e=ie(re(n)).link,t=e?ie(re(e)).deep_link_id:null,i=ie(re(n)).deep_link_id;return(i?ie(re(i)).link:null)||i||t||e||n}var ft=class n{constructor(e){var t,i,r,s,o,c;let u=ie(re(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(i=u.oobCode)!==null&&i!==void 0?i:null,f=Ca((r=u.mode)!==null&&r!==void 0?r:null);d(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=Ta(e);try{return new n(t)}catch{return null}}};var Fr=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return ke._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=ft.parseLink(i);return d(r,"argument-error"),ke._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),pt=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Mn=class extends pt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Sa(n,e){return a(this,null,function*(){return Me(n,"POST","/v1/accounts:signUp",W(n,e))})}var le=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return a(this,null,function*(){let s=yield ue._fromIdTokenResponse(e,i,r),o=cr(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return a(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=cr(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function cr(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Vn=class n extends w{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Ur(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Vn._fromErrorAndOperation(n,s,e,i):s})}function Da(n,e,t=!1){return a(this,null,function*(){let i=yield Pe(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return le._forOperation(n,"link",i)})}function Pa(n,e,t=!1){return a(this,null,function*(){let{auth:i}=n;if(b(i.app))return Promise.reject(V(i));let r="reauthenticate";try{let s=yield Pe(n,Ur(i,r,e,n),t);d(s.idToken,i,"internal-error");let o=zn(s.idToken);d(o,i,"internal-error");let{sub:c}=o;return d(n.uid===c,i,"user-mismatch"),le._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&S(i,"user-mismatch"),s}})}function xr(n,e,t=!1){return a(this,null,function*(){if(b(n.app))return Promise.reject(V(n));let i="signIn",r=yield Ur(n,i,e),s=yield le._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function Xn(n,e){return a(this,null,function*(){return xr(Z(n),e)})}function Wr(n){return a(this,null,function*(){let e=Z(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Zn(n,e,t){return a(this,null,function*(){if(b(n.app))return Promise.reject(V(n));let i=Z(n),o=yield Nn(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Sa).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Wr(n),u}),c=yield le._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function Qn(n,e,t){return b(n.app)?Promise.reject(V(n)):Xn(R(n),Fr.credential(e,t)).catch(i=>a(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&Wr(n),i}))}function It(n,e,t,i){return R(n).onIdTokenChanged(e,t,i)}function ei(n,e,t){return R(n).beforeAuthStateChanged(e,t)}function Et(n,e,t,i){return R(n).onAuthStateChanged(e,t,i)}var mt="__sak";var gt=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mt,"1"),this.storage.removeItem(mt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Oa=1e3,Ra=10,ka=(()=>{class n extends gt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kr(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);la()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Ra):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},Oa)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return a(this,null,function*(){yield j(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return a(this,null,function*(){let i=yield j(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return a(this,null,function*(){yield j(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Hr=ka;var Na=(()=>{class n extends gt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),ti=Na;function Ma(n){return Promise.all(n.map(e=>a(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Va=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return a(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let u=Array.from(c).map(h=>a(this,null,function*(){return h(i.origin,o)})),l=yield Ma(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function jr(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Ln=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return a(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let l=jr("",20);r.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(f){let m=f;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function T(){return window}function La(n){T().location.href=n}function Br(){return typeof T().WorkerGlobalScope<"u"&&typeof T().importScripts=="function"}function Fa(){return a(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Ua(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function xa(){return Br()?self:null}var $r="firebaseLocalStorageDb",Wa=1,_t="firebaseLocalStorage",Gr="fbase_key",X=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function wt(n,e){return n.transaction([_t],e?"readwrite":"readonly").objectStore(_t)}function Ha(){let n=indexedDB.deleteDatabase($r);return new X(n).toPromise()}function Fn(){let n=indexedDB.open($r,Wa);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(_t,{keyPath:Gr})}catch(r){t(r)}}),n.addEventListener("success",()=>a(this,null,function*(){let i=n.result;i.objectStoreNames.contains(_t)?e(i):(i.close(),yield Ha(),e(yield Fn()))}))})}function ur(n,e,t){return a(this,null,function*(){let i=wt(n,!0).put({[Gr]:e,value:t});return new X(i).toPromise()})}function ja(n,e){return a(this,null,function*(){let t=wt(n,!1).get(e),i=yield new X(t).toPromise();return i===void 0?null:i.value})}function lr(n,e){let t=wt(n,!0).delete(e);return new X(t).toPromise()}var Ba=800,$a=3,Ga=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return a(this,null,function*(){return this.db?this.db:(this.db=yield Fn(),this.db)})}_withRetries(t){return a(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>$a)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return a(this,null,function*(){return Br()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return a(this,null,function*(){this.receiver=Va._getInstance(xa()),this.receiver._subscribe("keyChanged",(t,i)=>a(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>a(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return a(this,null,function*(){var t,i;if(this.activeServiceWorker=yield Fa(),!this.activeServiceWorker)return;this.sender=new Ln(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return a(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Ua()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return a(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Fn();return yield ur(t,mt,"1"),yield lr(t,mt),!0}catch{}return!1})}_withPendingWrite(t){return a(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return a(this,null,function*(){return this._withPendingWrite(()=>a(this,null,function*(){return yield this._withRetries(r=>ur(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return a(this,null,function*(){let i=yield this._withRetries(r=>ja(r,t));return this.localCache[t]=i,i})}_remove(t){return a(this,null,function*(){return this._withPendingWrite(()=>a(this,null,function*(){return yield this._withRetries(i=>lr(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return a(this,null,function*(){let t=yield this._withRetries(s=>{let o=wt(s,!1).getAll();return new X(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>a(this,null,function*(){return this._poll()}),Ba)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),zr=Ga;var nd=Vr("rcb"),id=new Y(3e4,6e4);function za(n,e){return e?M(e):(d(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ne=class extends Re{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wn(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function qa(n){return xr(n.auth,new Ne(n),n.bypassAuthState)}function Ka(n){let{auth:e,user:t}=n;return d(t,e,"internal-error"),Pa(t,new Ne(n),n.bypassAuthState)}function Ja(n){return a(this,null,function*(){let{auth:e,user:t}=n;return d(t,e,"internal-error"),Da(t,new Ne(n),n.bypassAuthState)})}var Un=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>a(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return a(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qa;case"linkViaPopup":case"linkViaRedirect":return Ja;case"reauthViaPopup":case"reauthViaRedirect":return Ka;default:S(this.auth,"internal-error")}}resolve(e){x(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){x(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var rd=new Y(2e3,1e4);var Ya="pendingRedirect",ot=new Map,xn=class n extends Un{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return a(this,null,function*(){let e=ot.get(this.auth._key());if(!e){try{let i=(yield Xa(this.resolver,this.auth))?yield j(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ot.set(this.auth._key(),e)}return this.bypassAuthState||ot.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return a(this,null,function*(){if(e.type==="signInViaRedirect")return j(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,j(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return a(this,null,function*(){})}cleanUp(){}};function Xa(n,e){return a(this,null,function*(){let t=ec(e),i=Qa(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function Za(n,e){ot.set(n._key(),e)}function Qa(n){return M(n._redirectPersistence)}function ec(n){return st(Ya,n.config.apiKey,n.name)}function tc(n,e,t=!1){return a(this,null,function*(){if(b(n.app))return Promise.reject(V(n));let i=Z(n),r=za(i,e),o=yield new xn(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var nc=10*60*1e3,Wn=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ic(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!qr(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(J(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nc&&this.cachedEventUids.clear(),this.cachedEventUids.has(dr(e))}saveEventToCache(e){this.cachedEventUids.add(dr(e)),this.lastProcessedEventTime=Date.now()}};function dr(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qr({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ic(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qr(n);default:return!1}}function rc(t){return a(this,arguments,function*(n,e={}){return H(n,"GET","/v1/projects",e)})}var sc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oc=/^https?/;function ac(n){return a(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield rc(n);for(let t of e)try{if(cc(t))return}catch{}S(n,"unauthorized-domain")})}function cc(n){let e=An(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!oc.test(t))return!1;if(sc.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var uc=new Y(3e4,6e4);function hr(){let n=T().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lc(n){return new Promise((e,t)=>{var i,r,s;function o(){hr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hr(),t(J(n,"network-request-failed"))},timeout:uc.get()})}if(!((r=(i=T().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=T().gapi)===null||s===void 0)&&s.load)o();else{let c=Vr("iframefcb");return T()[c]=()=>{gapi.load?o():t(J(n,"network-request-failed"))},Mr(`${ma()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw at=null,e})}var at=null;function dc(n){return at=at||lc(n),at}var hc=new Y(5e3,15e3),fc="__/auth/iframe",pc="emulator/auth/iframe",mc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _c(n){let e=n.config;d(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?$n(e,pc):`https://${n.config.authDomain}/${fc}`,i={apiKey:e.apiKey,appName:n.name,v:ae},r=gc.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${we(i).slice(1)}`}function vc(n){return a(this,null,function*(){let e=yield dc(n),t=T().gapi;return d(t,n,"internal-error"),e.open({where:document.body,url:_c(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mc,dontclear:!0},i=>new Promise((r,s)=>a(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=J(n,"network-request-failed"),c=T().setTimeout(()=>{s(o)},hc.get());function u(){T().clearTimeout(c),r(i)}i.ping(u).then(u,()=>{s(o)})})))})}var yc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ic=500,Ec=600,wc="_blank",bc="http://localhost",vt=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Ac(n,e,t,i=Ic,r=Ec){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u=Object.assign(Object.assign({},yc),{width:i.toString(),height:r.toString(),top:s,left:o}),l=_().toLowerCase();t&&(c=Sr(l)?wc:t),Cr(l)&&(e=e||bc,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[D,ee])=>`${m}${D}=${ee},`,"");if(ua(l)&&c!=="_self")return Cc(e||"",c),new vt(null);let f=window.open(e||"",c,h);d(f,n,"popup-blocked");try{f.focus()}catch{}return new vt(f)}function Cc(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Tc="__/auth/handler",Sc="emulator/auth/handler",Dc=encodeURIComponent("fac");function fr(n,e,t,i,r,s){return a(this,null,function*(){d(n.config.authDomain,n,"auth-domain-config-required"),d(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ae,eventId:r};if(e instanceof pt){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Fi(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof Mn){let h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield n._getAppCheckToken(),l=u?`#${Dc}=${encodeURIComponent(u)}`:"";return`${Pc(n)}?${we(c).slice(1)}${l}`})}function Pc({config:n}){return n.emulator?$n(n,Sc):`https://${n.authDomain}/${Tc}`}var bn="webStorageSupport",Hn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ti,this._completeRedirectFn=tc,this._overrideRedirectResult=Za}_openPopup(e,t,i,r){return a(this,null,function*(){var s;x((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield fr(e,t,i,An(),r);return Ac(e,o,jr())})}_openRedirect(e,t,i,r){return a(this,null,function*(){yield this._originValidation(e);let s=yield fr(e,t,i,An(),r);return La(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(x(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return a(this,null,function*(){let t=yield vc(e),i=new Wn(e);return t.register("authEvent",r=>(d(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bn,{type:bn},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[bn];o!==void 0&&t(!!o),S(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ac(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kr()||Tr()||Kn()}},Kr=Hn;var pr="@firebase/auth",mr="1.7.8";var jn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return a(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){d(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Oc(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rc(n){oe(new A("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;d(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nr(n)},l=new Rn(i,r,s,u);return va(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),oe(new A("auth-internal",e=>{let t=Z(e.getProvider("auth").getImmediate());return(i=>new jn(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),y(pr,mr,Oc(n)),y(pr,mr,"esm2017")}var kc=5*60,Nc=en("authIdTokenMaxAge")||kc,gr=null,Mc=n=>e=>a(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Nc)return;let r=t?.token;gr!==r&&(gr=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function ni(n=Xe()){let e=gn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Jn(n,{popupRedirectResolver:Kr,persistence:[zr,Hr,ti]}),i=en("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=Mc(s.toString());ei(t,o,()=>o(t.currentUser)),It(t,c=>o(c))}}let r=Zt("auth");return r&&Yn(t,`http://${r}`),t}function Vc(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fa({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=J("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Vc().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rc("Browser");function Yr(n){return new me(function(e){var t=Et(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var Xr="auth",Q=class{constructor(e){return e}},ii=class{constructor(){return yn(Xr)}};var ri=new E("angularfire2.auth-instances");function Au(n,e){let t=er(Xr,n,e);return t&&new Q(t)}function Cu(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Q(i)}}var Tu={provide:ii,deps:[[new B,ri]]},Su={provide:Q,useFactory:Au,deps:[[new B,ri],K]};function Kd(n,...e){return y("angularfire",Ce.full,"auth"),Ge([Su,Tu,{provide:ri,useFactory:Cu(n),multi:!0,deps:[te,_e,tt,Te,[new B,Qe],...e]}])}var Zr=q(Yr,!0);var Qr=q(Zn,!0);var Jd=q(ni,!0);var es=q(Qn,!0);var cs=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(g(Bt),g(jt))},e.\u0275dir=P({type:e});let n=e;return n})(),Du=(()=>{let e=class e extends cs{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=wi(e)))(s||e)}})(),e.\u0275dir=P({type:e,features:[$]});let n=e;return n})(),us=new E("");var Pu={provide:us,useExisting:je(()=>ls),multi:!0};function Ou(){let n=qt()?qt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Ru=new E(""),ls=(()=>{let e=class e extends cs{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Ou())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(g(Bt),g(jt),g(Ru,8))},e.\u0275dir=P({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&Gt("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[ze([Pu]),$]});let n=e;return n})();var ds=new E(""),hs=new E("");function fs(n){return n!=null}function ps(n){return Ci(n)?Wt(n):n}function ms(n){let e={};return n.forEach(t=>{e=t!=null?v(v({},e),t):e}),Object.keys(e).length===0?null:e}function gs(n,e){return e.map(t=>t(n))}function ku(n){return!n.validate}function _s(n){return n.map(e=>ku(e)?e:t=>e.validate(t))}function Nu(n){if(!n)return null;let e=n.filter(fs);return e.length==0?null:function(t){return ms(gs(t,e))}}function oi(n){return n!=null?Nu(_s(n)):null}function Mu(n){if(!n)return null;let e=n.filter(fs);return e.length==0?null:function(t){let i=gs(t,e).map(ps);return vi(i).pipe(_i(ms))}}function ai(n){return n!=null?Mu(_s(n)):null}function ts(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Vu(n){return n._rawValidators}function Lu(n){return n._rawAsyncValidators}function si(n){return n?Array.isArray(n)?n:[n]:[]}function At(n,e){return Array.isArray(n)?n.includes(e):n===e}function ns(n,e){let t=si(e);return si(n).forEach(r=>{At(t,r)||t.push(r)}),t}function is(n,e){return si(e).filter(t=>!At(n,t))}var Ct=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oi(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ai(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},fe=class extends Ct{get formDirective(){return null}get path(){return null}},We=class extends Ct{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Tt=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Fu={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ph=I(v({},Fu),{"[class.ng-submitted]":"isSubmitted"}),mh=(()=>{let e=class e extends Tt{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(g(We,2))},e.\u0275dir=P({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&$t("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[$]});let n=e;return n})(),gh=(()=>{let e=class e extends Tt{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(g(fe,10))},e.\u0275dir=P({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&$t("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[$]});let n=e;return n})();var Ve="VALID",bt="INVALID",de="PENDING",Le="DISABLED",pe=class{},St=class extends pe{constructor(e,t){super(),this.value=e,this.source=t}},Ue=class extends pe{constructor(e,t){super(),this.pristine=e,this.source=t}},xe=class extends pe{constructor(e,t){super(),this.touched=e,this.source=t}},he=class extends pe{constructor(e,t){super(),this.status=e,this.source=t}};function vs(n){return(Ot(n)?n.validators:n)||null}function Uu(n){return Array.isArray(n)?oi(n):n||null}function ys(n,e){return(Ot(e)?e.asyncValidators:n)||null}function xu(n){return Array.isArray(n)?ai(n):n||null}function Ot(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Wu(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new He(1e3,"");if(!i[t])throw new He(1001,"")}function Hu(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new He(1002,"")})}var Dt=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ie(()=>this.statusReactive()),this.statusReactive=ye(void 0),this._pristine=Ie(()=>this.pristineReactive()),this.pristineReactive=ye(!0),this._touched=Ie(()=>this.touchedReactive()),this.touchedReactive=ye(!1),this._events=new pi,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return L(this.statusReactive)}set status(e){L(()=>this.statusReactive.set(e))}get valid(){return this.status===Ve}get invalid(){return this.status===bt}get pending(){return this.status==de}get disabled(){return this.status===Le}get enabled(){return this.status!==Le}get pristine(){return L(this.pristineReactive)}set pristine(e){L(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return L(this.touchedReactive)}set touched(e){L(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ns(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ns(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(is(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(is(e,this._rawAsyncValidators))}hasValidator(e){return At(this._rawValidators,e)}hasAsyncValidator(e){return At(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(I(v({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new xe(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new xe(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(I(v({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ue(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ue(!0,i))}markAsPending(e={}){this.status=de;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new he(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(I(v({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Le,this.errors=null,this._forEachChild(r=>{r.disable(I(v({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new St(this.value,i)),this._events.next(new he(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(I(v({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ve,this._forEachChild(i=>{i.enable(I(v({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(I(v({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ve||this.status===de)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new St(this.value,t)),this._events.next(new he(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(I(v({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Le:Ve}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=de,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=ps(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new he(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ve,this.statusChanges=new ve}_calculateStatus(){return this._allControlsDisabled()?Le:this.errors?bt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(de)?de:this._anyControlsHaveStatus(bt)?bt:Ve}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Ue(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xe(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ot(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Uu(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=xu(this._rawAsyncValidators)}},Pt=class extends Dt{constructor(e,t,i){super(vs(t),ys(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Hu(this,!0,e),Object.keys(e).forEach(i=>{Wu(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Rt=new E("CallSetDisabledState",{providedIn:"root",factory:()=>kt}),kt="always";function ju(n,e){return[...e.path,n]}function Is(n,e,t=kt){Es(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),$u(n,e),zu(n,e),Gu(n,e),Bu(n,e)}function rs(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bu(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Es(n,e){let t=Vu(n);e.validator!==null?n.setValidators(ts(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Lu(n);e.asyncValidator!==null?n.setAsyncValidators(ts(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();rs(e._rawValidators,r),rs(e._rawAsyncValidators,r)}function $u(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ws(n,e)})}function Gu(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ws(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ws(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zu(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function qu(n,e){n==null,Es(n,e)}function Ku(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ju(n){return Object.getPrototypeOf(n.constructor)===Du}function Yu(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Xu(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===ls?t=s:Ju(s)?i=s:r=s}),r||i||t||null}var Zu={provide:fe,useExisting:je(()=>Qu)},Fe=Promise.resolve(),Qu=(()=>{let e=class e extends fe{get submitted(){return L(this.submittedReactive)}constructor(i,r,s){super(),this.callSetDisabledState=s,this._submitted=Ie(()=>this.submittedReactive()),this.submittedReactive=ye(!1),this._directives=new Set,this.ngSubmit=new ve,this.form=new Pt({},oi(i),ai(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Fe.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Is(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Fe.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Fe.then(()=>{let r=this._findContainer(i.path),s=new Pt({});qu(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Fe.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Fe.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submittedReactive.set(!0),Yu(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(g(ds,10),g(hs,10),g(Rt,8))},e.\u0275dir=P({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&Gt("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ze([Zu]),$]});let n=e;return n})();function ss(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function os(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var el=class extends Dt{constructor(e=null,t,i){super(vs(t),ys(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ot(t)&&(t.nonNullable||t.initialValueIsDefault)&&(os(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ss(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ss(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){os(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var tl={provide:We,useExisting:je(()=>nl)},as=Promise.resolve(),nl=(()=>{let e=class e extends We{constructor(i,r,s,o,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new el,this._registered=!1,this.name="",this.update=new ve,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=Xu(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),Ku(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Is(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){as.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Si(r);as.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?ju(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(g(fe,9),g(ds,10),g(hs,10),g(us,10),g(Ti,8),g(Rt,8))},e.\u0275dir=P({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ze([tl]),$,Ei]});let n=e;return n})(),vh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=P({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var il=new E("");var bs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=$e({type:e}),e.\u0275inj=Be({});let n=e;return n})();var yh=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Rt,useValue:i.callSetDisabledState??kt}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=$e({type:e}),e.\u0275inj=Be({imports:[bs]});let n=e;return n})(),Ih=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:il,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Rt,useValue:i.callSetDisabledState??kt}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=$e({type:e}),e.\u0275inj=Be({imports:[bs]});let n=e;return n})();var As=class n{auth=Ht(Q);register(e){return Qr(this.auth,e.email,e.password)}logIn(e){return es(this.auth,e.email,e.password)}logOut(){return this.auth.signOut()}getUser(){return Zr(this.auth)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};export{rl as a,sl as b,_ as c,ol as d,w as e,R as f,A as g,p as h,se as i,oe as j,gn as k,ae as l,Xe as m,y as n,Ce as o,er as p,yn as q,Qe as r,tt as s,q as t,K as u,Te as v,ql as w,Kl as x,Q as y,ii as z,Kd as A,Jd as B,ls as C,mh as D,gh as E,Qu as F,nl as G,vh as H,yh as I,Ih as J,As as K};
